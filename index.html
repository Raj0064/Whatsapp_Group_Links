<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Registration</title>
  <style>
/* BODY & BACKGROUND */
body {
  font-family: 'Poppins', Arial, sans-serif;
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: cover;
  color: #333;
  min-height: 100vh;
  margin: 0;

  /* Center the form */
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0px 20px;
}

/* FORM CONTAINER */
.form-container {
  background: #ffffffee; /* semi-transparent white */
  width: 360px;
  max-width: 90%;
  padding: 35px 30px;
  border-radius: 15px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.form-container:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 30px rgba(0,0,0,0.25);
}

h3 {
  font-size: 24px;
  margin-bottom: 20px;
  color: #333;
}

/* INPUTS & SELECTS */
input, select {
  width: 100%;
  padding: 12px 15px;
  margin: 10px 0;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
  box-sizing: border-box;
  transition: border 0.3s ease, box-shadow 0.3s ease;
}

input:focus, select:focus {
  border-color: #007BFF;
  box-shadow: 0 0 5px rgba(0,123,255,0.4);
  outline: none;
}

/* BUTTONS */
button.submit-btn {
  width: 100%;
  padding: 12px;
  margin-top: 15px;
  background: #007BFF;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  font-size: 15px;
  transition: background 0.3s ease, transform 0.2s ease;
}

button.submit-btn:hover {
  background: #0056b3;
  transform: scale(1.03);
}

button.join-btn {
  display: none;
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  background-color: #28a745;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  font-size: 15px;
  transition: background 0.3s ease, transform 0.2s ease;
}

button.join-btn:hover {
  background-color: #218838;
  transform: scale(1.03);
}

/* ERROR MESSAGES */
span.error {
  color: #ff4d4f;
  font-size: 13px;
  display: none;
  text-align: left;
}

/* LOADING SPINNER */
#loadingOverlay {
  display: none;
  position: fixed;
  top:0; left:0; width:100%; height:100%;
  background: rgba(255,255,255,0.9);
  z-index: 1000;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

.spinner {
  border: 6px solid #f3f3f3;
  border-top: 6px solid #007BFF;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* RESPONSIVE */
@media (max-width: 400px) {
  .form-container {
    padding: 25px 20px;
  }

  input, select, button {
    padding: 10px;
    font-size: 14px;
  }

  h3 {
    font-size: 22px;
  }
}

  </style>
</head>

<body>


  <div class="form-container">
    <h3>Olympiad Group Joining</h3>

    <div>
      <input type="text" id="name" placeholder="Name">
      <span class="error" id="error-name">* Please fill your name</span>
    </div>

    <div>
      <input type="Number" id="mobile" placeholder="Whatsapp Number">
      <span class="error" id="error-mobile">* Please fill your mobile number</span>
      <span class="error" id="error-mobile-format">* Please enter a valid mobile number</span>
    </div>

    <div>
      <select id="board">
        <option value="">Select Board</option>
        <option value="CBSE">CBSE</option>
        <option value="ICSE">ICSE</option>
        <option value="IGCSE">Others</option>
      </select>
      <span class="error" id="error-board">* Please select a board</span>
    </div>

    <div>
      <select id="class">
        <option value="">Select Grade</option>
        <option value="KG">KG</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
      </select>
      <span class="error" id="error-class">* Please select a grade</span>
    </div>

    <button class="submit-btn" onclick="submitForm()">Submit</button>
    <button class="join-btn" id="joinBtn">Join</button>
  </div>
<div id="loadingOverlay" style="
  display:none;
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  background:rgba(255,255,255,0.8);
  z-index:1000;
  justify-content:center;
  align-items:center;
  flex-direction:column;
">
  <div class="spinner"></div>
  <p style="margin-top:10px; font-weight:bold; color:#007BFF;">Submitting...</p>
</div>


  <script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyHMU31y-VwqlB-4kgqzQmvz_dgjwj81EHMxvK4t8WaTKaqr2c6PGBn0SLbVwkvbib7NQ/exec"; // Replace with your Web App URL

    // Olympiad links for CBSE, ICSE, IGCSE
    const olympiadLinks = {
      CBSE: { KG: "#", 1: "#", 2: "#", 3: "#", 4: "#", 5: "#", 6: "#", 7: "#", 8: "#", 9: "#", 10: "#", 11: "#", 12: "#" },
      ICSE: { KG: "#", 1: "#", 2: "#", 3: "#", 4: "#", 5: "#", 6: "#", 7: "#", 8: "#", 9: "#", 10: "#", 11: "#", 12: "#" },
      IGCSE: { KG: "#", 1: "#", 2: "#", 3: "#", 4: "#", 5: "#", 6: "#", 7: "#", 8: "#", 9: "#", 10: "#", 11: "#", 12: "#" }
    };

    function submitForm() {
        // Hide all errors first
        document.querySelectorAll(".error").forEach(span => span.style.display = "none");

        const name = document.getElementById("name").value.trim();
        const mobile = document.getElementById("mobile").value.trim();
        const board = document.getElementById("board").value;
        const grade = document.getElementById("class").value;

        let valid = true;

        if (!name) { document.getElementById("error-name").style.display = "block"; valid = false; }
        if (!mobile) { document.getElementById("error-mobile").style.display = "block"; valid = false; }

        // Mobile number validation (10 digits)
        const mobilePattern = /^[0-9]+$/;
        if (mobile && !mobilePattern.test(mobile)) {
          document.getElementById("error-mobile-format").style.display = "block";
          valid = false;
        }

        if (!board) { document.getElementById("error-board").style.display = "block"; valid = false; }
        if (!grade) { document.getElementById("error-class").style.display = "block"; valid = false; }

        if (!valid) return;

        const submitBtn = document.querySelector('.submit-btn');

        // Show overlay and disable submit button
        document.getElementById("loadingOverlay").style.display = "flex";
        submitBtn.disabled = true;

        // Submit data
        fetch(WEB_APP_URL, {
          method: "POST",
          body: JSON.stringify({ name, mobile, board, class: grade })
        })
          .then(res => res.json())
          .then(data => {
            if (data.status === "success") {
              // Redirect after short delay for spinner effect
              setTimeout(() => {
                window.location.href = `join.html?board=${board}&class=${grade}`;
              }, 300); // 0.3s delay
            } else {
              document.getElementById("loadingOverlay").style.display = "none";
              submitBtn.disabled = false;
              alert("Submission failed, try again.");
            }
          })
          .catch(err => {
            console.error("Submission error:", err);
            document.getElementById("loadingOverlay").style.display = "none";
            submitBtn.disabled = false;
            alert("Submission failed, please check your connection.");
          });
      }
      window.addEventListener('pageshow', function (event) {
          if (event.persisted || window.performance && window.performance.getEntriesByType("navigation")[0].type === "back_forward") {
            // Reload the page if navigating back
            window.location.reload();
          }
        });
  window.onload = function () {
    document.getElementById("studentForm").reset();
  };


  </script>

</body>

</html>
